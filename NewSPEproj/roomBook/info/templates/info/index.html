{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">

<head>
<link href='https://fonts.googleapis.com/css?family=Indie+Flower' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Satisfy' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Exo' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Quicksand' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Crimson+Text' rel='stylesheet' type='text/css'>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
  
    <title>Potato Calendar </title>

    <!-- Bootstrap Core CSS -->
   

    <!-- Custom CSS -->
    <!--
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/full-slider.css" rel="stylesheet">
    <link href="css/flipclock.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/flipclock.css" rel="stylesheet">
    -->

    <link rel="stylesheet" type="text/css" href="{% static 'css/flipclock.css' %}" >
    <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}" >
    <link rel="stylesheet" type="text/css" href="{% static 'css/full-slider.css' %}" >
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}" >

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    
    <!-- Full Page Image Background Carousel Header -->
    <div id="myCarousel" class="carousel slide">
        <!-- Indicators -->
        <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0"></li>
            <li data-target="#myCarousel" data-slide-to="1" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="2"></li>
        </ol>

        <!-- Wrapper for Slides -->
        <div class="carousel-inner">
            <!-- First interface -->
            <!-- This interface displays the schedule for all meeting rooms-->
            <div class="item">
                <header>Potato Calendar {{ roomNumber }} </header>
                 <div class="panel-group" id="accordion">
                </div>
            </div>

            <!-- Main interface -->
            <!-- This interface displays the state for current meeting room-->
            <div class="item active main-page" >
                
                <!-- Set the second background image using inline CSS below. --> 

                <header>Potato Calendar {{ roomNumber }} </header>
                <div id="content">

                </div>       
            </div>


            <!-- Third interface-->
            <div id="third" class="item">

            </div>

            </div>
        </div>

        <!-- Controls -->
        <a class="left carousel-control" href="#myCarousel" data-slide="prev" role="button">
            <span class="icon-prev"><span class="prev"></span></span>
        </a>
        
        <a class="right carousel-control" href="#myCarousel" data-slide="next" role="button">
            
            <span class="icon-next" style="float:left"></span>
        </a>

    </div>


    <!-- jQuery -->
   <script src="{% static "js/jquery.js" %}" type="text/javascript"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="{% static "js/bootstrap.min.js" %}" type="text/javascript"></script>
    <!-- Script to Activate the Carousel -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.0.0/moment.min.js" type="text/javascript"></script>

    <!-- Script to implement the swipe functionality-->
    <script src="{% static "js/jquery.swipe.js" %}" type="text/javascript"></script>
    <script src="{% static "js/flipclock.js" %} " type="text/javascript"></script>
    <script src="{% static "js/display.js" %}" type="text/javascript"></script>
    <script>

    //TESTING AJAX STUFF.
    $.ajax({
        url: "/info/9/start/", 
        success: function(data) {
            //var str = JSON.stringify(data, null, 2);
            setData(data);
            //window.alert(str);
        }
    });
    //THIS IS WHERE THE USELESS CODE ENDS.

    $('.carousel').carousel({
        pause: true,
        interval: false //changes the speed
    });
    $(document).ready(function() {  
         $(".carousel-inner").swipe({
            swipeLeft: function(event, direction, distance, duration, fingerCount){
                $(this).parent().carousel('next');
            },
            swipeRight: function(event, direction, distance, duration, fingerCount){
                $(this).parent().carousel('prev');
            }
         });
    });

    $(document).ready(function() {
        var mainPage = mainPageInfo(data);
        var schedule = displayLeft(data.room_info);
        var currentRoomName = '#collapse'+data.currentRoom;
        var currentRoomInfo = getCurrentRoomInfo();
        var currentRoomAvailability = currentRoomInfo[0];
        $('#content').append(mainPage);
        $('#accordion').append(schedule);
        $(currentRoomName).collapse('show');
        if (currentRoomAvailability == "True") {
            $('#Room').removeClass("occupied").addClass("available");
        } else {
            $('#Room').removeClass("available").addClass("occupied");
            var clock;
            clock = $("#clock").FlipClock({
                clockFace: 'HourlyCounter',
                autoStart: false,
                callbacks: {
                    stop: function() {
                        $('.message').html('The clock has stopped!')
                    }
                }
            });
            clock.setTime(parseInt(currentRoomInfo[3]));
            clock.setCountdown(true);
            clock.start();
        }
        for (var i = 0; i < data.room_info.length; i++){
            var roomInfo = getRoomInformation(i);
            var roomName = data.room_info[i].room_name;
            var titleName = '#title_'+ roomName;
            //var lable = '#next'+ roomName;
            if (roomInfo[0] == "False"){
                $(titleName).removeClass("available").addClass("occupied");
                //$(lable).text("Available in "+room.nextAvailable+" Minutes");
            } else {
                $(titleName).removeClass("occupied").addClass("available");
            }
        }

    });
    </script>

</body>

</html>
